// this is autogenerated file, do not edit manually!
#include "m_pd.h"
#ifndef __ui_meter_tcl_h
#define __ui_meter_tcl_h
namespace {
void ui_meter_tcl_output() {
	sys_vgui("%s", "namespace eval ui {\nproc meter_db2color { db cold tepid warm hot over } {\nif {$db < -30} { return $cold }\nif {$db < -21} { return $tepid }\nif {$db < -12} { return $warm }\nif {$db < -3} { return $hot } { return $over }\n}\nproc meter_create_hrms { id cnv w h rms cold tepid warm hot over } {\nif {$rms < -49} { return }\nset t [::ceammc::ui::widget_tag $id]\nset led_wstep [expr ($w+1) / 13.0]\nset led_dbstep 3\nset led_pad 3\nfor {set i 0} {$i < 13} {incr i} {\nset led_db [expr -$led_dbstep * (13 - $i)]\nif {$rms > $led_db} {\nset delta [expr $rms - $led_db]\nset last [expr $delta < $led_dbstep]\nset c [meter_db2color $led_db $cold $tepid $warm $hot $over]\nset led_ratio [expr $last ? ($delta / $led_dbstep) : 1]\nset x0 [expr {round($i*$led_wstep)} + 1]\nset x1 [expr {round(($i+$led_ratio)*$led_wstep)}]\nset y0 $led_pad\nset y1 [expr $h-$led_pad]\n$cnv create rectangle $x0 $y0 $x1 $y1 -fill $c -outline $c -width 1 -tags $t\n}\n}\n}\nproc meter_create_vrms { id cnv w h rms cold tepid warm hot over } {\nif {$rms < ");
	sys_vgui("%s", "-49} { return }\nset t [::ceammc::ui::widget_tag $id]\nset led_hstep [expr ($h+1) / 13.0]\nset led_dbstep 3\nset led_pad 3\nfor {set i 0} {$i < 13} {incr i} {\nset led_db [expr -$led_dbstep * (13 - $i)]\nif {$rms > $led_db} {\nset delta [expr $rms - $led_db]\nset last [expr $delta < $led_dbstep]\nset c [meter_db2color $led_db $cold $tepid $warm $hot $over]\nset led_ratio [expr $last ? ($delta / $led_dbstep) : 1]\nset x0 $led_pad\nset x1 [expr $w-$led_pad]\nset y0 [expr $h - {round($i*$led_hstep)} + 1]\nset y1 [expr $h - {round(($i+$led_ratio)*$led_hstep)}]\n$cnv create rectangle $x0 $y0 $x1 $y1 -fill $c -outline $c -width 1 -tags $t\n}\n}\n}\nproc meter_create_hpeak { id cnv w h peak cold tepid warm hot over } {\nif {$peak < -49} { return }\nset t [::ceammc::ui::widget_tag $id]\nset c [meter_db2color $peak $cold $tepid $warm $hot $over]\nset x0 [expr (($peak+49)/49) * $w]\nset y0 -1\nset y1 [expr $h + 1]\nif { $x0 > $w } { set x0 $w }\nset x1 $x0\n$cnv create line $x0 $y0 $x1 $y1 -fill $c -width 2 -tags $t\n}\nproc me");
	sys_vgui("%s", "ter_create_vpeak { id cnv w h peak cold tepid warm hot over } {\nif {$peak < -49} { return }\nset t [::ceammc::ui::widget_tag $id]\nset c [meter_db2color $peak $cold $tepid $warm $hot $over]\nset x0 -1\nset x1 [expr $w + 1]\nset y0 [expr $h * (1 - (($peak+49)/49)) ]\nif { $y0 < 0 } { set y0 0 }\nset y1 $y0\n$cnv create line $x0 $y0 $x1 $y1 -fill $c -width 2 -tags $t\n}\nproc meter_create_hoverload { id cnv w h over } {\nset t [::ceammc::ui::widget_tag $id]\nset led_pad 3\nset step [expr ($w+1) / 13.0]\nset x0 [expr round(12 * $step) + 1]\nset x1 [expr round(13 * $step)]\nset y0 $led_pad\nset y1 [expr ($h-$led_pad)+2]\n$cnv create rectangle $x0 $y0 $x1 $y1 -fill $over -width 0 -tags $t\n}\nproc meter_create_voverload { id cnv w h over } {\nset t [::ceammc::ui::widget_tag $id]\nset led_pad 3\nset step [expr ($h+1) / 13.0]\nset x0 $led_pad\nset x1 [expr ($w-$led_pad)+2]\nset y0 1\nset y1 $step\n$cnv create rectangle $x0 $y0 $x1 $y1 -fill $over -width 0 -tags $t\n}\nproc meter_create_hlines { id cnv w h bdcolor } {\nset t ");
	sys_vgui("%s", "[::ceammc::ui::widget_tag $id]\nset step [expr ($w+1) / 13.0]\nset lh [expr $h + 1]\nfor {set i 1} {$i < 13} {incr i} {\nset x [expr {round($i*$step)}]\n$cnv create line $x -1 $x $lh -fill $bdcolor -tags $t\n}\n}\nproc meter_create_vlines { id cnv w h bdcolor } {\nset t [::ceammc::ui::widget_tag $id]\nset step [expr ($h+1) / 13.0]\nset lw [expr $w + 1]\nfor {set i 1} {$i < 13} {incr i} {\nset y [expr {round($i*$step)}]\n$cnv create line -1 $y $lw $y -fill $bdcolor -tags $t\n}\n}\nproc meter_delete {id cnv} {\nset t [::ceammc::ui::widget_tag $id]\n$cnv delete $t\n}\nproc meter_create {id cnv w h bdcolor cold tepid warm hot over rms peak overload} {\nif {$w > $h} {\nmeter_create_hlines $id $cnv $w $h $bdcolor\nmeter_create_hrms $id $cnv $w $h $rms $cold $tepid $warm $hot $over\nmeter_create_hpeak $id $cnv $w $h $peak $cold $tepid $warm $hot $over\nif { $overload } { meter_create_hoverload $id $cnv $w $h $over }\n} else {\nmeter_create_vlines $id $cnv $w $h $bdcolor\nmeter_create_vrms $id $cnv $w $h $rms $cold $tepid $");
	sys_vgui("%s", "warm $hot $over\nmeter_create_vpeak $id $cnv $w $h $peak $cold $tepid $warm $hot $over\nif { $overload } { meter_create_voverload $id $cnv $w $h $over }\n}\n}\n}\n");
}
}
#endif // __ui_meter_tcl_h
