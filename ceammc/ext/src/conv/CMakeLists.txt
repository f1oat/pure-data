set(CONV_SOURCES mod_conv.h mod_conv.cpp)

macro(ceammc_conv_external name)
    list(APPEND CONV_SOURCES "conv_${name}.cpp")
endmacro()

find_package(Gperf)
if(Gperf_FOUND)
    ecm_gperf_generate(morse.gperf gperf_morse.h MySources
        GENERATION_FLAGS "-L C++ --class-name=MorsePerfectHash --struct-type")

    add_custom_target(gen_morse DEPENDS gperf_morse.h)
endif()

ceammc_conv_external(amp2dbfs)
ceammc_conv_external(angles)
ceammc_conv_external(bits2bang)
ceammc_conv_external(bits2int)
ceammc_conv_external(bits2note)
ceammc_conv_external(bits2pos)
ceammc_conv_external(bpm2hz)
ceammc_conv_external(bpm2ms)
ceammc_conv_external(bpm2sec)
ceammc_conv_external(cc2amp)
ceammc_conv_external(char2morse)
ceammc_conv_external(dbfs2amp)
ceammc_conv_external(degree2key)
ceammc_conv_external(edge2bang)
ceammc_conv_external(hex2int)
ceammc_conv_external(int2bits)
ceammc_conv_external(lin2curve)
ceammc_conv_external(lin2exp)
ceammc_conv_external(lin2lin)
ceammc_conv_external(lin2lin_tilde)
ceammc_conv_external(list2props)
ceammc_conv_external(midi2freq)
ceammc_conv_external(ms2samp)
ceammc_conv_external(ms2bpm)
ceammc_conv_external(note2guido)
ceammc_conv_external(pitch2midi)
ceammc_conv_external(samp2ms)
ceammc_conv_external(samp2sec)
ceammc_conv_external(sec2bpm)
ceammc_conv_external(sec2samp)
ceammc_conv_external(sec2str)
ceammc_conv_external(sig2float)
ceammc_conv_external(str2sec)

add_library(ceammc_conv STATIC  ${CONV_SOURCES})
target_include_directories(ceammc_conv PRIVATE ${PROJECT_SOURCE_DIR}/src)
