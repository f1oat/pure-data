set(FX_SOURCES fx_looper.cpp)

macro(ceammc_fx_external name)
    list(APPEND FX_SOURCES "fx_${name}.cpp")
    ceammc_faust_gen(fx ${name})
endmacro()

macro(ceammc_fx_obj_external name)
    list(APPEND FX_SOURCES "fx_${name}.cpp")
    ceammc_faust_gen_obj(fx ${name} JSON)
endmacro()

ceammc_fx_external(drone_box)
ceammc_fx_external(freqshift)
ceammc_fx_external(granulator)
ceammc_fx_external(wahwah)

ceammc_fx_obj_external(bitdown)
ceammc_fx_obj_external(chorus)
ceammc_fx_obj_external(distortion)
ceammc_fx_obj_external(distortion1)
ceammc_fx_obj_external(echo)
ceammc_fx_obj_external(flanger)
ceammc_fx_obj_external(freeverb)
ceammc_fx_obj_external(freeverb2)
ceammc_fx_obj_external(greyhole)
ceammc_fx_obj_external(pitchshift)
ceammc_fx_obj_external(sdelay)
ceammc_fx_obj_external(zita_rev1)

add_library(ceammc_fx STATIC mod_fx.cpp ${FX_SOURCES})
set_target_properties(ceammc_fx PROPERTIES COMPILE_DEFINITIONS "FAUST_MACRO")
if(UNIX)
    set_target_properties(ceammc_fx PROPERTIES COMPILE_FLAGS "-fPIC")
endif()
